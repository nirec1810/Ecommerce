# =============================================================================
# APPLICATION PROPERTIES - ORDER SERVICE
# Spring Boot 3.5.7 + Spring Cloud 2025.0.0
# =============================================================================

# -----------------------------------------------------------------------------
# SERVER CONFIGURATION
# -----------------------------------------------------------------------------
server.port=8083

# -----------------------------------------------------------------------------
# APPLICATION NAME
# -----------------------------------------------------------------------------
spring.application.name=order-service

# JACKSON (JSON) CONFIGURATION
# Soluciona el error de "Leading zeroes not allowed"
# -----------------------------------------------------------------------------
spring.jackson.parser.allow-numeric-leading-zeros=true
spring.jackson.deserialization.fail-on-unknown-properties=false
spring.jackson.deserialization.accept-float-as-int=true
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.serialization.indent-output=true


# -----------------------------------------------------------------------------
# MYSQL DATABASE CONFIGURATION
# 
spring.datasource.url=jdbc:mysql://localhost:3306/order_db?createDatabaseIfNotExist=true
spring.datasource.username=root
spring.datasource.password=123456
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# -----------------------------------------------------------------------------
# MYSQL DATABASE CONFIGURATION
# 
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL8Dialect
spring.jpa.properties.hibernate.format_sql=true




# ============================================================
# SPRING CLOUD OPENFEIGN (Spring Cloud 2025.0.0)
# ============================================================

# Configuraci칩n global de Feign Clients
spring.cloud.openfeign.client.config.default.connect-timeout=5000
spring.cloud.openfeign.client.config.default.read-timeout=5000

# Logger level: NONE, BASIC, HEADERS, FULL
spring.cloud.openfeign.client.config.default.logger-level=FULL

# Circuit Breaker (deshabilitar temporalmente para desarrollo)
spring.cloud.openfeign.circuitbreaker.enabled=false

# Apache HttpClient para soporte de PATCH
# Apache HttpClient Configuration
# NOTA: No existe "enabled" en Spring Cloud 2025.0.0
# Si la dependencia feign-httpclient est치 en el classpath, se usa autom치ticamente
spring.cloud.openfeign.httpclient.follow-redirects=true
spring.cloud.openfeign.httpclient.max-connections=200
spring.cloud.openfeign.httpclient.max-connections-per-route=50
spring.cloud.openfeign.httpclient.time-to-live=900
spring.cloud.openfeign.httpclient.time-to-live-unit=seconds

# Compression
spring.cloud.openfeign.compression.request.enabled=false
spring.cloud.openfeign.compression.response.enabled=false
spring.cloud.compatibility-verifier.enabled=false
spring.cloud.openfeign.okhttp.enabled=true



# -----------------------------------------------------------------------------
# LOGGING CONFIGURATION
# -----------------------------------------------------------------------------
logging.level.root=INFO
logging.level.com.ads.ecommerce=DEBUG
logging.level.org.springframework.web=DEBUG
logging.level.org.springframework.cloud.openfeign=DEBUG
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n

# Conexi칩n al servidor Eureka
eureka.client.service-url.defaultZone=http://localhost:8761/eureka
# application.properties para Clientes de Admin
management.endpoints.web.exposure.include=*
management.endpoint.health.show-details=always